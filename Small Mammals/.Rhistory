dat <- "input/P23_Dep1_SmallMammals.csv"
head(dat)
dat <- read.csv("input/P23_Dep1_SmallMammals.csv", header=T)
head(dat)
dat <- read.csv("input/P23_Dep1_SmallMammals.csv")
head(dat)
dat <- read.csv("input/P23_Dep1_SmallMammals.csv", header=T)
head(dat)
dat$Canister
levels(dat$Canister)
paste(dat$Genus, dat$Species)
dat$name <- name <- paste(dat$Genus, dat$Species)
head(dat)
levels(dat$name)
levels(as.factor(dat$name))
all.species<- c(
"Canis dirus",
"Canis latrans",
"Canis sp",
"Dipodomys sp",
"Mephitis mephitis",
"Microtus sp",
"Mustela frenata",
"Neotamias merriami",
"Neotoma sp",
"Onychomys torridus",
"Otospermophilus beecheyi",
"Perognathus sp.",
"Peromyscus sp.",
"Reithrodontomys megalotis",
"Reithrodontomys sp.",
"Sylvilagus sp",
"Sylvilagus audubonii",
"Sylvilagus bachmani",
"Taxidea taxus",
"Thomomys bottae",
"Thomomys sp")
all.species
dim(dat)
raw.names <- levels(dat$name)
raw.names
dat$name <- paste(dat$Genus, dat$Species)
head(dat)
raw.names <- levels(as.factor(dat$name))
raw.names
match.names <- NULL
which(raw.names == "Canis cf. dirus")
raw.names
which((dat$name == "Canis cf. dirus") | (dat$name == "Canis dirus")))
which((dat$name == "Canis cf. dirus") | (dat$name == "Canis dirus"))
?write.csv
write.csv(file="input/processed/P23_Dep1_SmallMammals-clean.csv", col.names=T)
write.csv(dat, file="input/processed/P23_Dep1_SmallMammals-clean.csv", col.names=T)
write.csv(dat, file="input/processed/P23_Dep1_SmallMammals-clean.csv")
# Read in file
dat <- read.csv("input/raw/P23_Dep1_SmallMammals.csv", header=T)
# create new species name that combines genus and species
dat$name <- paste(dat$Genus, dat$Species)
# for purposes of this analysis, combine different species into groups
all.species<- c(
"Canis dirus",
"Canis latrans",
"Canis sp",
"Dipodomys sp",
"Mephitis mephitis",
"Microtus sp",
"Mustela frenata",
"Neotamias sp",
"Neotamias merriami",
"Neotoma sp",
"Onychomys torridus",
"Otospermophilus sp",
"Otospermophilus beecheyi",
"Perognathus sp",
"Peromyscus sp",
"Reithrodontomys megalotis",
"Reithrodontomys sp",
"Spilogale sp",
"Sylvilagus sp",
"Sylvilagus audubonii",
"Sylvilagus bachmani",
"Taxidea taxus",
"Thomomys bottae",
"Thomomys sp")
raw.names <- levels(as.factor(dat$name))
raw.names
# Replace orginal names with processed names
dat$name[which((dat$name == "Canis cf. dirus") | (dat$name == "Canis dirus"))] <- "Canis dirus"
dat$name[which((dat$name == "Canis cf. latrans") | (dat$name == "Canis latrans"))] <- "Canis latrans"
dat$name[which((dat$name == "Canis sp."))] <- "Canis sp"
dat$name[which((dat$name == "cf. Dipodomys sp.") | (dat$name == "Dipodomys sp."))] <- "Dipodomys sp"
dat$name[which((dat$name == "cf. Microtus ") | (dat$name == "cf. Microtus sp.") | (dat$name == "Microtus sp. ") | (dat$name == "Microtus ") | (dat$name == "Microtus sp."))] <- "Microtus sp"
dat$name[which((dat$name == "Neotoma ") | (dat$name == "Neotoma sp."))] <- "Neotoma sp"
dat$name[which((dat$name == "Mustela cf. frenata"))] <- "Mustela frenata"
dat$name[which((dat$name == "Neotamias cf. merriami") | (dat$name == "cf. Neotamias"))] <- "Neotamias sp"
dat$name[which((dat$name == "cf. Otospermophilus"))] <- "Otospermophilus sp"
dat$name[which((dat$name == "Otospermophilus cf. beecheyi"))] <- "Otospermophilus beecheyi"
dat$name[which((dat$name == "Perognathus sp."))] <- "Perognathus sp"
dat$name[which((dat$name == "cf. Peromyscus") | (dat$name == "Peromyscus sp.") | (dat$name == "Peromyscus "))] <- "Peromyscus sp"
dat$name[which((dat$name == "Reithrodontomys cf. megalotis"))] <- "Reithrodontomys megalotis"
dat$name[which((dat$name == "cf. Reithrodontomys ") | (dat$name == "Reithrodontomys sp."))] <- "Reithrodontomys sp"
dat$name[which((dat$name == "cf. Spilogale "))] <- "Spilogale sp"
dat$name[which((dat$name == "cf. Sylvilagus ") | (dat$name == "cf. Sylvilagus sp.") | (dat$name == "Sylvilagus sp.") | (dat$name == "Sylvilagus "))] <- "Sylvilagus sp"
dat$name[which((dat$name == "Sylvilagus cf. audubonii"))] <- "Sylvilagus audubonii"
dat$name[which((dat$name == "Sylvilagus cf. bachmani") | (dat$name == "Sylvilagus cf. bachmanii"))] <- "Sylvilagus bachmani"
dat$name[which((dat$name == "cf. Taxidea taxus"))] <- "Taxidea taxus"
dat$name[which((dat$name == "Thomomys cf. bottae"))] <- "Thomomys bottae"
dat$name[which((dat$name == "cf. Thomomys ") | (dat$name == "Thomomys sp."))] <- "Thomomys sp"
head(dat)
tail(dat)
dat$name
unique(dat$name)
dat <- read.csv("input/raw/P23_Dep1_SmallMammals.csv", header=T)
dat$name <- paste(dat$Genus, dat$Species)
dat$name
unique(dat$name)
unique(dat$name)
dat <- read.csv("input/raw/P23_Dep1_SmallMammals.csv", header=T)
taxonomy <- read.delim("input/raw/TaxonomyMatchingFile.txt", sep="/t", header=T)
taxonomy <- read.delim("input/raw/TaxonomyMatchingFile.txt", sep="\t", header=T)
taxonomy
taxonomy <- read.delim("input/raw/TaxonomyMatchingFile.txt", sep="\t", header=T)
taxonomy
taxonomy[31,]
taxonomy[31,2]
as.character(taxonomy[31,2])
taxonomy <- read.delim("input/raw/TaxonomyMatchingFile.txt", sep="\t", header=T)
taxonomy
head(dat)
dat$name <- paste(dat$Genus, dat$Species)
unique(dat$name)
dat
head(dat)
colnames(taxonomy)
match(dat$name, taxonomy$OriginalName)
dat[match(dat$name, taxonomy$OriginalName),]
match(dat$name, taxonomy$OriginalName)
dim(dat)
dim(taxonomy)
range(match(dat$name, taxonomy$OriginalName), na.rm=T)
taxonomy[match(dat$name, taxonomy$OriginalName), 'RevisedName']
dat$name <- taxonomy[match(dat$name, taxonomy$OriginalName), 'RevisedName']
head(dat)
head(dat)
tail(dat)
dat$name
unique(dat$name)
write.csv(dat, file="input/processed/P23_Dep1_SmallMammals-clean.csv")
match(dat$name, taxonomy$OriginalName)
deposits <- c("1","17","7b","13")
files <- list.files("input/raw/GoogleDriveExports")
files
original<- read.delim(files[i], sep="\t")
i <- 1
original<- read.delim(files[i], sep="\t")
files <- list.files("input/raw/GoogleDriveExports", full=T)
original<- read.delim(files[i], sep="\t")
original
head(original)
which(is.na(original$Species))
unique(original$Species)
which(original$Species == " "
)
levels(unique(original$Species))
which(original$Species == "")
# figure out prelim_taxon_name
rowsToSpecies <- which(original$Species != "")
rowsToGenus <- which(original$Genus == "")
rowsToGenus
rowsToSubfamily <- which(original$Subfamily == "")
orowsToSubfamily
rowsToSubfamily
rowsToGenus <- which(original$Genus != "")
# figure out prelim_taxon_name
rowsToSpecies <- which(original$Species != "")
head(original[rowsToSpecies,])
